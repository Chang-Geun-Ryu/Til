# 화면 전환

* iOS에서 화면을 전환하는 방법은 크게 두가지가 존재
  * 소스코드를 통해 전환 하는 방법 (세부적으로 두가지 방법이 존재)
  * 스토리보드가 제공하는 기능을 이용하는 방법
* 소스코드를 이용한방식을 동적인 방식
* 스토리보드를 이용한방식을 정적인 방식

#### iOS에서 화면 전환 개념

1. 뷰컨트롤러의 뷰위에 다른 뷰를 가져와 바꿔치기
2. 뷰컨트롤러에서 다른 뷰 컨트롤러를 호출하여 화면 전환
3. 내비게이션 컨트롤러를 사용하여 화면 전환
4. 화면 전환용 객체 세그웨이를 사용하여 화면 전환

**iOS 화면전환 특성**

* 다음 화면으로 이동하는 방법과 이전 화면으로 되돌아가는 방법이 다름
* 화면 전환 방식에 따라 화면으로 되돌아가는 방법이 다름

#### 뷰컨틀롤러 직접 호출에 의한 화면 전환

* 현재의 뷰 컨트롤러에서 이동할 대상 뷰 컨트롤러르 직접 호출해서 화면을 표시하는 방식: **프레젠테이션 방식**

* **present(<새로운 뷰컨트롤러 인스턴스>, animated: <애니메이션 여부>)**

* 화면 전환이 완료되는 시점에 맞추어 특정 로직을 실행 해야할 경우 

  **present(_:animated:completion:)** : 클로저 형식으로 실행 구문을 입력받아 화면 전환이 끝난 후 호출해 주는 역활 (화면이 완전히 전환 되기전에 실행, 비동기식으로 작동)

* present 메소드 사용시 이전 화면으로 복귀할 때 **dismiss(animated:)**  메소드 사용

* 개념적으로 기존화면이 새로운 화면 위로 올라오는 것이 아니라 기존 화면을 덮고 있던 새 화면을 걷어내는 것

* 화면을 걷어내는 주체는 현재 화면 자신이 아닌, 자신을 띄우고 있는 이전 뷰 컨트롤러

* 즉 , **self.presentingViewController?.dismiss(animated:)**

* Unwind: iOS 앱에서 이전 화면으로 돌아가는 것이 함, Unwind를 위한 별도의 메소드를 제공하기에 화면 복귀 시 반드시 제공 되는 메소드를 이용하여 이전 화면으로 되돌아 가야함

* Presentation 방식으로 화면 전환시 Presentation Chain에 뷰컨트롤러의 포인터들이 차례대로 저장 되어 해제시 ARC에의해 차례로 해제

* 화면 전환 방식이 달라지면 그것에 맞는 Unwind 메소드도 달라 짐 방식에 따라 다른 메소드를 사용 해야 함

#### 내비게이션 컨트롤러를 이용한 화면 전환

* 뷰 컨트롤러의 특별한 종류, 계층적인 성격을 띠는 콘텐츠 구조를 관리 하기 위한 컨트롤러, app navigation 을 표시해주는 Navigation Bar가 내장
* 항상 콘텐츠 계층 구조의 시작점 역활을 하는 뷰 컨트롤러를 **루트 뷰 컨트롤러** 라고 함
* 화면 현재 표시되고 있는 뷰 컨트롤러들을 내비게이션 스택을 이용하여 관리
  * 스택의 최상위 뷰 컨트롤러를 추가할 때 pushViewController(_:animated:) 메소드 사용
  * 스택의 최상위 뷰 컨트롤러를 제거할 때 popViewController(animated:) 메소드 사용
* 각 뷰 컨트롤러마다 내장된 내비게이션 바에 이전 화면으로 되돌아갈 수 있는 버튼을 자동으로 생성

#### 세그웨이를 이용한 화면 전환

* 스토리보드에거 뷰 컨트롤러 사이의 연결 관계 및 화면 전환을 관리하는 역활
* 화면과 화면을 연결하기위해 소스코드가 필요하지 않은 방식, 뷰컨트롤러와 뷰컨트롤러또는 화면 전환의 매개체가 되는 버튼과 뷰컨트롤러 사이를 직접 연결하는 식으로 화면 전환 관계를 구성
* 한쪽으로만 통행가능한 통로로 사용만 가능

<img width="231" alt="스크린샷 2019-04-29 15 38 18" src="https://user-images.githubusercontent.com/45986486/56879766-28482980-6a95-11e9-8dd5-85494e27dd0e.png">

* 뷰 컨트롤러의 정보없이, 뷰컨트롤러의 객체 생성없이, 스토리 보드상의 연결 정보를 이용하여 대상 뷰 컨트롤러의 인스턴스를 자동 생성
* **Manual Segue**: 출발점이 뷰 컨트롤러 자체인 경우
* **Action Segue**: 버튼 등이 출발점인 경우, UIKit framework에 정의된, performSegue(withIdentifier:sender: )  메소드를 사용

<img width="541" alt="스크린샷 2019-04-29 15 50 56" src="https://user-images.githubusercontent.com/45986486/56880143-993c1100-6a96-11e9-8a55-22b36dfad208.png">

**Action Segue**

* 트리거와 세그웨이가 직접 연결된 방식
* 화면전환을 위해 코드를 사용하지 않으며, 스토리 보드에 구현된 객체를 트리거로 지정

**Manual Segue**

* 뷰컨트롤러와 뷰컨트롤러 사이에서 연결되는 수동 실행 세그웨이
* **performSegue(withIdentifier: <세그웨이 식별자>, sender: <세그웨이 실행 객체>)**

**Unwind - 화면 복귀**

* presantation 방식으로 화면 전환시: dissmiss(animated:)
* Navigation Controller 방식 화면 전환시 : popViewcontroller(animated:)
* Segue 방식 화면 전환시: Unwind Segue (Exit를 이용하여 현재 화면 종료하고 되돌아가는 Unwind Segue 구현 가능

<img width="523" alt="스크린샷 2019-04-29 17 03 06" src="https://user-images.githubusercontent.com/45986486/56883121-b07ffc00-6aa0-11e9-856f-7478a23b5e72.png">